<?xml version="1.0"?>
<root>

  <!--
    define application
    https://github.com/tekezo/KeyRemap4MacBook/blob/master/src/core/server/Resources/appdef.xml
  -->

  <appdef>
    <appname>TERM</appname>
    <equal>com.apple.Terminal</equal>
    <equal>org.macosforge.xquartz.X11</equal>
    <equal>com.jetbrains.intellij.ce</equal>
    <equal>com.google.android.studio</equal>
  </appdef>

  <!-- define remap rules -->

  <item>
    <name>Swap Command with Control in RDC</name>
    <identifier>private.app_rdc_swap_cmd_and_ctrl</identifier>
    <only>REMOTEDESKTOPCONNECTION</only>
    <autogen>
        --KeyToKey--
        KeyCode::COMMAND_L,
        KeyCode::CONTROL_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::CONTROL_L,
        KeyCode::COMMAND_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::CURSOR_LEFT, ModifierFlag::CONTROL_L,
        KeyCode::HOME
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::CURSOR_LEFT, ModifierFlag::COMMAND_L,
        KeyCode::CURSOR_LEFT, ModifierFlag::CONTROL_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::CURSOR_RIGHT, ModifierFlag::CONTROL_L,
        KeyCode::END
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::CURSOR_RIGHT, ModifierFlag::COMMAND_L,
        KeyCode::CURSOR_RIGHT, ModifierFlag::CONTROL_L
    </autogen>
  </item>

  <item>
    <name>Swap Command with Control (except Cmd+Tab, Cmd+Space, Ctrl+Left, Ctrl+Right) in Terminal</name>
    <identifier>private.app_terminal_swap_cmd_and_ctrl</identifier>
    <only>TERM</only>
    <autogen>
        --KeyToKey--
        KeyCode::COMMAND_L,
        KeyCode::CONTROL_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::CONTROL_L,
        KeyCode::COMMAND_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::TAB, ModifierFlag::CONTROL_L,
        KeyCode::TAB, ModifierFlag::COMMAND_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::TAB, ModifierFlag::COMMAND_L,
        KeyCode::TAB, ModifierFlag::CONTROL_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::SPACE, ModifierFlag::CONTROL_L,
        KeyCode::SPACE, ModifierFlag::COMMAND_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::SPACE, ModifierFlag::COMMAND_L,
        KeyCode::SPACE, ModifierFlag::CONTROL_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::CURSOR_LEFT, ModifierFlag::CONTROL_L,
        KeyCode::CURSOR_LEFT, ModifierFlag::COMMAND_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::CURSOR_LEFT, ModifierFlag::COMMAND_L,
        KeyCode::CURSOR_LEFT, ModifierFlag::CONTROL_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::CURSOR_RIGHT, ModifierFlag::CONTROL_L,
        KeyCode::CURSOR_RIGHT, ModifierFlag::COMMAND_L
    </autogen>
    <autogen>
        --KeyToKey--
        KeyCode::CURSOR_RIGHT, ModifierFlag::COMMAND_L,
        KeyCode::CURSOR_RIGHT, ModifierFlag::CONTROL_L
    </autogen>
  </item>

</root>
